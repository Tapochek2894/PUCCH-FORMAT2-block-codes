# PUCCH-FORMAT2-block-codes

–ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –±–ª–æ—á–Ω—ã—Ö –∫–æ–¥–æ–≤ –≤ **PUCCH FORMAT2** (Physical Uplink Control Channel). –í–∫–ª—é—á–∞–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–æ–¥—É–ª—è—Ü–∏—é QPSK, –ø–µ—Ä–µ–¥–∞—á—É —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª AWGN, –¥–µ–º–æ–¥—É–ª—è—Ü–∏—é –∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í–µ—Ä—Å–∏—è |
| ----------- | -------- |
| –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä | g++ ‚â• 11.4 –∏–ª–∏ clang++ ‚â• 14 |
| –°—Ç–∞–Ω–¥–∞—Ä—Ç C++ | C++17 |
| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ | STL, GTest, nlohmann/json |

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –°–±–æ—Ä–∫–∞
make

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
make run

# –ó–∞–ø—É—Å–∫ —Å –≤—Ö–æ–¥–Ω—ã–º —Ñ–∞–π–ª–æ–º
make run input.json

# –û—á–∏—Å—Ç–∫–∞
make clean
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

``` bash
PUCCH-FORMAT2-block-codes/
‚îú‚îÄ‚îÄ include/              # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ encoder.hpp
‚îÇ   ‚îú‚îÄ‚îÄ decoder.hpp
‚îÇ   ‚îú‚îÄ‚îÄ modulator.hpp
‚îÇ   ‚îú‚îÄ‚îÄ demodulator.hpp
‚îÇ   ‚îî‚îÄ‚îÄ channel.hpp
‚îú‚îÄ‚îÄ src/                  # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ main.cpp
‚îÇ   ‚îú‚îÄ‚îÄ encoder.cpp
‚îÇ   ‚îú‚îÄ‚îÄ decoder.cpp
‚îÇ   ‚îú‚îÄ‚îÄ modulator.cpp
‚îÇ   ‚îú‚îÄ‚îÄ demodulator.cpp
‚îÇ   ‚îî‚îÄ‚îÄ channel.cpp
‚îú‚îÄ‚îÄ build/                # –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏ (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ Git)
‚îú‚îÄ‚îÄ tests/                 
‚îÇ   ‚îú‚îÄ‚îÄ integration/      #  –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ unit/             #  –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ Makefile
‚îî‚îÄ‚îÄ README.md
```

---

## üîß –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### 1. –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –±–∏—Ç–æ–≤ –≤ QPSK-—Å–∏–º–≤–æ–ª—ã.

**–í—Ö–æ–¥:**

```json
{
    "mode": "coding",
    "num_of_pucch_f2_bits": 11,
    "pucch_f2_bits": [1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0]
}
```

**–í—ã—Ö–æ–¥:**

```json
{
    "mode": "coding",
    "num_of_pucch_f2_bits": 11,
    "qpsk_symbols": ["0.707+0.707j", "-0.707+0.707j", ...]
}
```

---

### 2. –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç—ã—Ö QPSK-—Å–∏–º–≤–æ–ª–æ–≤ –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –±–∏—Ç—ã.

**–í—Ö–æ–¥:**

```json
{
    "mode": "decoding",
    "num_of_pucch_f2_bits": 11,
    "qpsk_symbols": ["0.707+0.707j", "-0.707+0.707j", ...]
}
```

**–í—ã—Ö–æ–¥:**

```json
{
    "mode": "decoding",
    "num_of_pucch_f2_bits": 11,
    "pucch_f2_bits": [1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0]
}
```

---

### 3. –°–∏–º—É–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

–°–∏–º—É–ª—è—Ü–∏—è —Å –ø–æ–º–æ—â—å—é  –º–µ—Ç–æ–¥–∞ –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ SNR –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è BLER.

**–í—Ö–æ–¥:**

```json
{
    "mode": "channel simulation",
    "num_of_pucch_f2_bits": 11,
    "snr_db": 5.0,
    "iterations": 1000
}
```

**–í—ã—Ö–æ–¥:**

```json
{
    "mode": "channel simulation",
    "num_of_pucch_f2_bits": 11,
    "snr_db": 5.0,
    "iterations": 1000,
    "bler": 0.1500,
    "success": 850,
    "failed": 150
}
```

---

## üõ† –°–±–æ—Ä–∫–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
| --------- | ---------- |
| `make` | –°–±–æ—Ä–∫–∞ release-–≤–µ—Ä—Å–∏–∏ |
| `make clean` | –û—á–∏—Å—Ç–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–±–æ—Ä–∫–∏ |
| `make run [args]` | –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ |
| `make test` | –ó–∞–ø—É—Å–∫ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ |
| `make bench` | –ó–∞–ø—É—Å–∫ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤ |
| `make help` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É |

---

## üìê –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–ê–ª–≥–æ—Ä–∏—Ç–º:** –∫–æ–¥ –†–∏–¥–∞-–ú–∞–ª–ª–µ—Ä–∞ (20, n) –∏–∑ 3GPP TS 38.212
- **–î–ª–∏–Ω—ã –∫–æ–¥–∞:** 2, 4, 6, 8, 11 –±–∏—Ç
- **–ö–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ:** –≤—Å–µ–≥–¥–∞ 20 –±–∏—Ç
- **–ü–æ—Ä–æ–∂–¥–∞—é—â–∞—è –º–∞—Ç—Ä–∏—Ü–∞:** A‚ÇÇ‚ÇÄ‚Çì‚ÇÅ‚ÇÉ, —É—Å–µ—á–µ–Ω–∏–µ —Å–ª–µ–≤–∞ –¥–ª—è n < 13

### –ú–æ–¥—É–ª—è—Ü–∏—è

- **–¢–∏–ø:** QPSK —Å –∫–æ–¥–æ–º –ì—Ä–µ—è
- **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è:** –ï–¥–∏–Ω–∏—á–Ω–∞—è –º–æ—â–Ω–æ—Å—Ç—å —Å–∏–º–≤–æ–ª–∞ (Es = 1)
- **–ú–∞–ø–ø–∏–Ω–≥:** `0 ‚Üí +1/‚àö2`, `1 ‚Üí -1/‚àö2` –Ω–∞ –∫–∞–∂–¥–æ–π –æ—Å–∏

### –ö–∞–Ω–∞–ª

- **–¢–∏–ø:** –° –∞–¥–¥–∏—Ç–∏–≤–Ω—ã–º –±–µ–ª—ã–º –≥–∞—É—Å–æ–≤—Å–∫–∏–º —à—É–º–æ–º
- **–®—É–º:** –ì–∞—É—Å—Å–æ–≤—Å–∫–∏–π, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ —Å–∏–Ω—Ñ–∞–∑–Ω–æ–π –∏ –∫–≤–∞–¥—Ä–∞—Ç—É—Ä–Ω–æ–π —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∏–º
- **–§–æ—Ä–º—É–ª–∞ —à—É–º–∞:** `œÉ = ‚àö(1 / (2 √ó SNR_linear))`

### –î–µ–º–æ–¥—É–ª—è—Ü–∏—è

- **–¢–∏–ø:** –ú—è–≥–∫–∞—è
- **–í—ã—Ö–æ–¥:** –õ–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–∏—è (LLR) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∏—Ç–∞
- **–§–æ—Ä–º—É–ª–∞:** `LLR = -2‚àö2 √ó SNR_linear √ó coordinate`

### –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–ê–ª–≥–æ—Ä–∏—Ç–º:** –ú–∞–∫—Å–∏–º—É–º –ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–∏—è (–ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä)
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –ü—Ä–µ–¥—Ä–∞—Å—á–∏—Ç–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–æ–¥–æ–≤—ã—Ö —Å–ª–æ–≤
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** O(2‚Åø) –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
make test
```

### –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤ TODO

- –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ/–¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ —à—É–º–∞ (BLER = 0)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –¥–ª–∏–Ω –∫–æ–¥–∞ {2, 4, 6, 8, 11}
- Monte-Carlo —Å–∏–º—É–ª—è—Ü–∏—è BLER vs SNR

---

## üìä –ë–µ–Ω—á–º–∞—Ä–∫–∏

### –ó–∞–ø—É—Å–∫

```bash
make bench
```

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–∫–æ–¥–µ—Ä–∞ (TODO)

| –î–ª–∏–Ω–∞ –∫–æ–¥–∞ (n) | –ö–æ–¥–æ–≤—ã—Ö —Å–ª–æ–≤ | –û–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ Decode() | –í—Ä–µ–º—è (–Ω—Å) |
| ---------------- | -------------- | ---------------------- | ------------ |

---

## üìö –°—Å—ã–ª–∫–∏

- **3GPP TS 36.212 version 17.1.0 Release 17** ‚Äî Multiplexing and channel coding (Section 5.2.3.3)

- **nlohmann/json** ‚Äî <https://github.com/nlohmann/json>

- **google/googletest** - <https://github.com/google/googletest>
